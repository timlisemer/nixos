# Tool Approval Log Ingestor
# Ingests system logs via webhook and writes to Home Assistant logbook

- id: 'tool_approve_ingestor'
  alias: Ingest System Logs
  description: 'Receives tool approval events and logs them to the logbook'
  mode: queued
  triggers:
    - trigger: webhook
      allowed_methods:
        - POST
        - PUT
      local_only: false
      webhook_id: '@webhook_id_tool-approve@'
  conditions: []
  actions:
    - service: logbook.log
      data:
        name: "System Log"
        message: "{{ trigger.json.cmd }} | {{ trigger.json.status }} | {{ trigger.json.reason }}"
